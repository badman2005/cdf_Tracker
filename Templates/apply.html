<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apply for CDF Funding | Republic of Zambia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Calibri', 'Arial', sans-serif; background-color: #f8fafc; }
        .zambia-ribbon {
            background: linear-gradient(90deg, #198A00 25%, #DE2010 25%, #DE2010 50%, #000000 50%, #000000 75%, #EF7D00 75%);
            height: 4px;
        }
        .step-active { border-color: #198A00; color: #198A00; }
    </style>
</head>
<body>

    <div class="zambia-ribbon"></div>

    <header class="bg-white border-b border-gray-200 py-4 shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-6 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 bg-gray-100 rounded flex items-center justify-center border border-gray-200 text-[6px] text-center font-bold uppercase p-1">
                    Coat of Arms
                </div>
                <h1 class="text-lg font-bold text-gray-900 leading-tight">CDF Application Portal</h1>
            </div>
            <nav class="hidden md:flex gap-8 font-semibold text-gray-700">


                <a href="{{ url_for('index') }}">Dashboard</a>
                <a href="apply.html" class="text-[#198A00] border-b-2 border-[#198A00] pb-1">Apply</a>
            </nav>
            <a href="{{ url_for('index') }}"><i class="fas fa-times"></i> Cancel</a>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12 max-w-4xl">
        
        <div class="flex justify-between mb-12 relative">
            <div class="absolute top-1/2 left-0 w-full h-1 bg-gray-200 -z-10 -translate-y-1/2"></div>
            <div class="bg-white px-4 flex flex-col items-center gap-2 step-active">
                <div class="w-10 h-10 rounded-full border-2 flex items-center justify-center font-bold bg-white">1</div>
                <span class="text-xs font-bold uppercase">Category</span>
            </div>
            <div class="bg-white px-4 flex flex-col items-center gap-2 text-gray-400">
                <div class="w-10 h-10 rounded-full border-2 flex items-center justify-center font-bold bg-white">2</div>
                <span class="text-xs font-bold uppercase">Details</span>
            </div>
            <div class="bg-white px-4 flex flex-col items-center gap-2 text-gray-400">
                <div class="w-10 h-10 rounded-full border-2 flex items-center justify-center font-bold bg-white">3</div>
                <span class="text-xs font-bold uppercase">Uploads</span>
            </div>
        </div>

        <div class="bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden">
            <div class="p-8 border-b border-gray-50">
                <h2 class="text-2xl font-bold text-gray-800">New Funding Request</h2>
                <p class="text-gray-500 text-sm">Please select your application category to begin.</p>
            </div>

         <form id="cdfForm" action="{{ url_for('apply') }}" method="POST" class="p-8 space-y-8" enctype="multipart/form-data">
    <div id="step-1" class="space-y-8">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <label class="relative cursor-pointer">
                <input type="radio" name="cat" value="Community Projects" class="peer sr-only" checked>
                <div class="p-4 border-2 rounded-xl hover:border-[#198A00] peer-checked:border-[#198A00] peer-checked:bg-green-50 transition">
                    <i class="fas fa-users text-[#198A00] mb-2"></i>
                    <h4 class="font-bold text-sm">Community Projects</h4>
                </div>
            </label>
            </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="space-y-2">
                <label class="text-xs font-bold uppercase text-gray-500 tracking-wider">Applicant Name</label>
                <input type="text" name="applicant_name" required placeholder="John Doe" class="w-full p-3 bg-gray-50 border border-gray-200 rounded-lg outline-none focus:border-[#198A00]">
            </div>
            <div class="space-y-2">
                <label class="text-xs font-bold uppercase text-gray-500 tracking-wider">NRC Number</label>
                <input type="text" name="nrc_number" required placeholder="000000/00/1" class="w-full p-3 bg-gray-50 border border-gray-200 rounded-lg outline-none focus:border-[#198A00]">
            </div>
        </div>
        </div>

    <div id="step-2" class="hidden space-y-6">
        <h3 class="font-bold text-lg text-gray-800">Upload Supporting Documents</h3>
        <div class="border-2 border-dashed border-gray-200 p-12 rounded-2xl flex flex-col items-center bg-gray-50">
            <input type="file" name="proposal_file" class="...">
        </div>
    </div>

    <div class="flex justify-between items-center pt-6 border-t border-gray-100">
        <p id="step-label" class="text-[10px] text-gray-400 font-bold uppercase">Step 1 of 2</p>
        <button id="next-btn" type="button" onclick="handleNextStep()" class="bg-[#198A00] text-white px-10 py-3 rounded-xl font-bold">
            NEXT STEP
        </button>
    </div>
</form>

<script>
    let currentStep = 1;

    function handleNextStep() {
        if (currentStep === 1) {
            // Logic to move to step 2
            document.getElementById('step-1').classList.add('hidden');
            document.getElementById('step-2').classList.remove('hidden');
            document.getElementById('next-btn').innerHTML = 'SUBMIT APPLICATION <i class="fas fa-check ml-2"></i>';
            document.getElementById('step-label').innerText = 'Step 2 of 2';
            currentStep = 2;
        } else {
            // THE FIX: Actually submit the form to Python
            document.getElementById('cdfForm').submit();
        }
    }
</script>
        </div>
    </main>

    <footer class="bg-[#0f172a] text-white pt-12 pb-6 border-t-8 border-[#198A00]">
        <div class="container mx-auto px-6 text-center">
            <p class="text-xs text-gray-500">&copy; 2025 Republic of Zambia | CDF Application Portal</p>
        </div>
    </footer>

</body>
</html>